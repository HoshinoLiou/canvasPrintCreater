<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>noBorderPhotoCreate</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kaisei+Tokumin:wght@400;500;700&display=swap');

        * {
            margin: 0;
            padding: 0;
        }

        #app {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            /* padding: 20px; */
        }


        /* 牆壁樣式 */
        .wall {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            /* width:100%;
            height:100%; */
        }

        .wall_paper {
            position: absolute;
            width: 100%;
        }

        .wall_material {
            position: absolute;
            height: 100%;
            width: 100%;
            /* background: url(p0394_l.png); */
            opacity: 0.7;
            background-position: center;
            /* filter: grayscale(100%); */
        }

        .wall_material::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(170deg, rgb(255, 255, 255) 50%, rgb(141, 141, 141) 100%);
            opacity: 0.7;
        }

        /*視角*/
        .view {
            transform: scale(1);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            /* height: 100%;
            width: 100%; */
        }

        /*單相框*/
        .single {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            /* margin: 0 6px; */
        }

        /*三相框*/


        /* 相框 */
        .canvas {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            /* width: 200px;
            height: 200px; */
            border-radius: 1px;
            box-shadow: 5px 8px 20px 0px rgb(0 0 0 / 55%);
            transform: translateY(-20px);
            overflow: hidden;
            z-index: 1;
            background: white;

            margin: 0 6px;
        }

        /* .canvas::before {
            content: "";
            position: absolute;
            height: 95%;
            width: 93%;
            top: 5%;
            right: -11%;
            background: black;
            filter: blur(10px);
            opacity: 0.25;
            border-radius: 0 0% 20% 0;
        } */

        /* 相框材質 */
        .canvas_material {
            position: absolute;
            border-radius: 1px;
            opacity: 0.1;
            background: linear-gradient(45deg, rgb(223, 223, 223) 12%, transparent 0, transparent 88%, rgb(223, 223, 223) 0),
                linear-gradient(135deg, transparent 37%, rgb(172, 172, 172) 0, rgb(172, 172, 172) 63%, transparent 0),
                linear-gradient(45deg, transparent 37%, rgb(223, 223, 223) 0, rgb(223, 223, 223) 63%, transparent 0) rgb(172, 172, 172);
            background-size: 4px 4px;

        }

        /* 相框細節 */
        .canvas_detail {
            position: absolute;
            border-top: 2px solid rgb(124, 124, 124);
            border-left: 2px solid rgb(110, 110, 110);
            border-right: 4px solid rgb(200, 200, 200);
            border-bottom: 4px solid rgb(200, 200, 200);
            border-radius: 1px;
            z-index: 2;
            opacity: 0.4;
            filter: blur(4px);
            box-sizing: border-box;
            overflow: hidden;
        }

        /* 相框陰影 */
        .canvasShadow {
            position: absolute;
            /* height: 90%;
            width: 95%; */
            /* top: 15%;
            left: 12%; */
            background: black;
            opacity: 0.2;
            filter: blur(1.5px);
            transform: translate(8%, 2%);
        }

        /* .canvasShadow::before {
            content: "";
            position: absolute;
            /* top: -2%;
            left: -2%;
            height: 100%;
            width: 10%; --
            bottom: 1%;
            left: -1%;
            height: 50%;
            width: 9%;
            background: black;
            opacity: 1;
            transform-origin: left bottom;
            transform: rotate(45deg) translateX(-20px);
        } */

        .canvasShadow::after {
            content: "";
            position: absolute;
            top: 0px;
            right: 0px;
            height: 50%;
            width: 10%;
            background: black;
            opacity: 1;
            transform-origin: right top;
            transform: rotate(45deg) translateX(0px);
        }

        .photo {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 1px;
            background: white;
            box-sizing: border-box;
            filter: contrast(110%);
        }


        /*相框控制器*/
        .wallControllers {
            position: fixed;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 30%;
            background: rgba(205, 205, 205, 0.5);
            bottom: 0;
        }

        .wallControllers_inner {
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
        }

        .wallControllers_inner .list {
            /* position: absolute; */
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
            width: 100%;
            height: 10%;
            /* top: 0;
            left: 0; */
        }

        .logo{
            position: absolute;
            top:0;
            right:0;
            padding:10px;
            font-size: 18px;
        }

        .wallControllers_inner .list span {
            display: block;
            padding: 5px 10px;
            border: 1px solid #242424;
        }

        .list label input[type=radio] {
            width: 0;
            height: 0;
            display: none;
        }

        .list label input[type=radio]:checked~span {
            background: #242424;
            color: white;
        }

        .item {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            height: 90%;
            width: 90%;
        }

        .item div {
            margin: 7px 0;
        }
    </style>

</head>

<body>

    <div id="app">
        <!-- 牆壁 -->
        <div id="wall" class="wall" :style="wallStyle">
            <!-- 牆壁壁紙 -->
            <img class="wall_paper" :src="wall_paperStyle.src" />
            <!-- 牆壁材質 -->
            <div class="wall_material" :style="wall_materialStyle"></div>

            <div class="view" :style="view">

                <!-- 相框1 -->
                <label :style="canvasObject1_Style" class="canvasObject" v-if="canvasCount >= 1" for="photo1">
                    <div class="single">
                        <!-- 相框 -->
                        <div class="canvas" :style="canvasStyle[0]">
                            <!-- 相片 -->
                            <img class="photo" :src="photo[0].src" alt="">
                            <!-- 相框材質 -->
                            <div class="canvas_material" :style="canvasStyle[0]"></div>
                            <div class="canvas_detail" :style="canvasStyle[0]"></div>
                        </div>
                        <!-- 相框陰影 -->
                        <div class="canvasShadow" :style="canvasShadowStyle0"></div>
                    </div>
                </label>

                <!-- 相框2 -->
                <label :style="canvasObject2_Style" class="canvasObject" v-if="canvasCount >= 2" for="photo2">
                    <div class="single">
                        <!-- 相框 -->
                        <div class="canvas" :style="canvasStyle[1]">
                            <!-- 相片 -->
                            <img class="photo" :src="photo[1].src" alt="">
                            <!-- 相框材質 -->
                            <div class="canvas_material" :style="canvasStyle[1]"></div>
                            <div class="canvas_detail" :style="canvasStyle[1]"></div>
                        </div>
                        <!-- 相框陰影 -->
                        <div class="canvasShadow" :style="canvasShadowStyle1"></div>
                    </div>
                </label>

                <!-- 相框3 -->
                <label :style="canvasObject3_Style" class="canvasObject" v-if="canvasCount >= 3" for="photo3">
                    <div class="single">
                        <!-- 相框 -->
                        <div class="canvas" :style="canvasStyle[2]">
                            <!-- 相片 -->
                            <img class="photo" :src="photo[2].src" alt="">
                            <!-- 相框材質 -->
                            <div class="canvas_material" :style="canvasStyle[2]"></div>
                            <div class="canvas_detail" :style="canvasStyle[2]"></div>
                        </div>
                        <!-- 相框陰影 -->
                        <div class="canvasShadow" :style="canvasShadowStyle2"></div>
                    </div>
                </label>

                <!-- 相框4 -->
                <label :style="canvasObject4_Style" class="canvasObject" v-if="canvasCount >= 4" for="photo4">
                    <div class="single">
                        <!-- 相框 -->
                        <div class="canvas" :style="canvasStyle[3]">
                            <!-- 相片 -->
                            <img class="photo" :src="photo[3].src" alt="">
                            <!-- 相框材質 -->
                            <div class="canvas_material" :style="canvasStyle[3]"></div>
                            <div class="canvas_detail" :style="canvasStyle[3]"></div>
                        </div>
                        <!-- 相框陰影 -->
                        <div class="canvasShadow" :style="canvasShadowStyle4"></div>
                    </div>
                </label>

                <!-- 相框5 -->
                <label :style="canvasObject5_Style" class="canvasObject" v-if="canvasCount >= 5" for="photo5">
                    <div class="single">
                        <!-- 相框 -->
                        <div class="canvas" :style="canvasStyle[4]">
                            <!-- 相片 -->
                            <img class="photo" :src="photo[4].src" alt="">
                            <!-- 相框材質 -->
                            <div class="canvas_material" :style="canvasStyle[4]"></div>
                            <div class="canvas_detail" :style="canvasStyle[4]"></div>
                        </div>
                        <!-- 相框陰影 -->
                        <div class="canvasShadow" :style="canvasShadowStyle5"></div>
                    </div>
                </label>
            </div>

        </div>

        <div class="wallControllers">
            <div class="wallControllers_inner">
                <!-- <div class="logo">
                    CanvasPrint
                </div> -->

                <div class="list">
                    <label>
                        <input type="radio" value="all" v-model="wallController_choice">
                        <span>整體</span>
                    </label>
                    <label v-if="canvasCount >= 1">
                        <input type="radio" id="photo1" value="1" v-model="wallController_choice">
                        <span>相框1</span>
                    </label>
                    <label v-if="canvasCount >= 2">
                        <input type="radio" id="photo2" value="2" v-model="wallController_choice">
                        <span>相框2</span>
                    </label>
                    <label v-if="canvasCount >= 3">
                        <input type="radio" id="photo3" value="3" v-model="wallController_choice">
                        <span>相框3</span>
                    </label>
                    <label v-if="canvasCount >= 4">
                        <input type="radio" id="photo4" value="4" v-model="wallController_choice">
                        <span>相框4</span>
                    </label>
                    <label v-if="canvasCount >= 5">
                        <input type="radio" id="photo5" value="5" v-model="wallController_choice">
                        <span>相框5</span>
                    </label>
                </div>

                <div class="item" v-if="wallController_choice == 'all'">
                    <div>
                        相框數量: <input type="range" min="1" max="5" v-model="canvasCount"> {{canvasCount}}個
                    </div>
                    <div>
                        相框間距: <input type="range" min="0" max="100" v-model="canvasMargin"> <input style="width:50px;"
                            type="number" v-model="canvasMargin">
                    </div>
                    <div>
                        視角遠近: <input type="range" min="10" max="200" v-model="photoRange"> {{photoRange/100}}
                        <button @click="photoRange = 100">預設</button>
                    </div>
                    <div>
                        水平移動: <input type="range" min="-100" max="100" v-model="photo_X"> <input
                            style="width:50px;" type="number" v-model="photo_X">
                        <button @click="photo_X = 0">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-100" max="100" v-model="photo_Y"> <input
                            style="width:50px;" type="number" v-model="photo_Y">
                        <button @click="photo_Y = 0">預設</button>
                    </div>
                    <!-- <div>
                        壁紙: <input type="file" @change="changeWallPaper">
                        <button @click="wall_paperStyle.src = ''">remove</button>
                    </div> -->
                </div>

                <div class="item" v-else-if="wallController_choice == '1'">
                    <div>
                        照片: <input type="file" @change="changePhoto('0',$event)">
                        <!-- <button @click="photo[0].src = ''">remove</button> -->
                    </div>
                    <div>
                        水平移動: <input type="range" min="-200" max="200" v-model="photo1_X"> <input
                            style="width:50px;" type="number" v-model="photo1_X">
                        <button @click="photo1_X=0">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-200" max="200" v-model="photo1_Y"> <input
                            style="width:50px;" type="number" v-model="photo1_Y">
                        <button @click="photo1_Y=0">預設</button>
                    </div>
                    <div>
                        照片大小: <input type="range" min="10" max="300" v-model="photo1_size"> <input style="width:50px;"
                            type="number" v-model="photo1_size">%
                        <button @click="photo1_size=100;">預設</button>
                    </div>
                </div>

                <div class="item" v-else-if="wallController_choice == '2'">
                    <div>
                        照片: <input type="file" @change="changePhoto('1',$event)">
                        <!-- <button @click="photo.src = ''">remove</button> -->
                    </div>
                    <div>
                        水平移動: <input type="range" min="-200" max="200" v-model="photo2_X"> <input
                            style="width:50px;" type="number" v-model="photo2_X">
                        <button @click="photo2_X=0;">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-200" max="200" v-model="photo2_Y"> <input
                            style="width:50px;" type="number" v-model="photo2_Y">
                        <button @click="photo2_Y=0;">預設</button>
                    </div>
                    <div>
                        照片大小: <input type="range" min="10" max="300" v-model="photo2_size"> <input style="width:50px;"
                            type="number" v-model="photo2_size">%
                        <button @click="photo2_size=100;">預設</button>
                    </div>
                </div>

                <div class="item" v-else-if="wallController_choice == '3'">
                    <div>
                        照片: <input type="file" @change="changePhoto('2',$event)">
                        <!-- <button @click="photo.src = ''">remove</button> -->
                    </div>
                    <div>
                        水平移動: <input type="range" min="-200" max="200" v-model="photo3_X"> <input
                            style="width:50px;" type="number" v-model="photo3_X">
                        <button @click="photo3_X=0;">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-200" max="200" v-model="photo3_Y"> <input
                            style="width:50px;" type="number" v-model="photo3_Y">
                        <button @click="photo3_Y=0;">預設</button>
                    </div>
                    <div>
                        照片大小: <input type="range" min="10" max="300" v-model="photo3_size"> <input style="width:50px;"
                            type="number" v-model="photo3_size">%
                        <button @click="photo3_size=100;">預設</button>
                    </div>

                </div>

                <div class="item" v-else-if="wallController_choice == '4'">
                    <div>
                        照片: <input type="file" @change="changePhoto('3',$event)">
                        <!-- <button @click="photo.src = ''">remove</button> -->
                    </div>
                    <div>
                        水平移動: <input type="range" min="-200" max="200" v-model="photo4_X"> <input
                            style="width:50px;" type="number" v-model="photo4_X">
                        <button @click="photo4_X=0;">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-200" max="200" v-model="photo4_Y"> <input
                            style="width:50px;" type="number" v-model="photo4_Y">
                        <button @click="photo4_Y=0;">預設</button>
                    </div>
                    <div>
                        照片大小: <input type="range" min="10" max="300" v-model="photo4_size"> <input style="width:50px;"
                            type="number" v-model="photo4_size">%
                        <button @click="photo4_size=100;">預設</button>
                    </div>
                </div>

                <div class="item" v-else-if="wallController_choice == '5'">
                    <div>
                        照片: <input type="file" @change="changePhoto('4',$event)">
                        <!-- <button @click="photo.src = ''">remove</button> -->
                    </div>
                    <div>
                        水平移動: <input type="range" min="-200" max="200" v-model="photo5_X"> <input
                            style="width:50px;" type="number" v-model="photo5_X">
                        <button @click="photo5_X=0;">預設</button>
                    </div>
                    <div>
                        垂直移動: <input type="range" min="-200" max="200" v-model="photo5_Y"> <input
                            style="width:50px;" type="number" v-model="photo5_Y">
                        <button @click="photo5_Y=0;">預設</button>
                    </div>
                    <div>
                        照片大小: <input type="range" min="10" max="300" v-model="photo5_size"> <input style="width:50px;"
                            type="number" v-model="photo5_size">%
                        <button @click="photo5_size=100;">預設</button>
                    </div>
                </div>
            </div>



        </div>

    </div>

    <!-- Vue 3.0 cdn -->
    <script src="https://unpkg.com/vue@next"></script>

    <script>

        console.log(window.innerHeight);
        let vm = Vue.createApp({
            data() {
                return {
                    // 牆壁
                    wallStyle: {
                        "width": document.body.clientWidth + "px", //600px
                        "height": window.innerHeight * 70 / 100 + "px", //500px
                    },
                    wall_paperStyle: {
                        src: ""
                    },
                    wall_materialStyle: {
                        background: `url(p0394_l.png)`
                    },
                    // 相框
                    canvasStyle: [
                        {
                            "width": "100px", //(需與圖片相同)
                            "height": "300px"
                        }, {
                            "width": "100px", //(需與圖片相同)
                            "height": "300px"
                        }, {
                            "width": "100px", //(需與圖片相同)
                            "height": "300px"
                        }, {
                            "width": "300px", //(需與圖片相同)
                            "height": "350px"
                        }, {
                            "width": "300px", //(需與圖片相同)
                            "height": "350px"
                        }
                    ],
                    canvasCount: 1,
                    canvasMargin: 5,
                    // 照片
                    photo: [
                        {
                            src: "pic-1.jpg"
                        },
                        {
                            src: "pic-2.jpg"
                        },
                        {
                            src: "pic-3.jpg"
                        },
                        {
                            src: "pic.jpg"
                        },
                        {
                            src: "pic.jpg"
                        }
                    ],
                    photoRange: "100",
                    photo_X: "0",
                    photo_Y: "0",
                    // 編輯器
                    wallController_choice: "all",

                    // 相框變化
                    photo1_X: "0",
                    photo1_Y: "0",
                    photo1_size: "100",
                    photo2_X: "0",
                    photo2_Y: "0",
                    photo2_size: "100",
                    photo3_X: "0",
                    photo3_Y: "0",
                    photo3_size: "100",
                    photo4_X: "0",
                    photo4_Y: "0",
                    photo4_size: "100",
                    photo5_X: "0",
                    photo5_Y: "0",
                    photo5_size: "100",
                }
            },
            watch: {
                //* 相框數量 調整時
                canvasMargin: function () {
                    this.wallController_choice = "all";
                    let canvas = document.getElementsByClassName("canvas");
                    for (let i = 0; i < canvas.length; i++) {
                        canvas[i].style.margin = `0px ${this.canvasMargin}px`;
                    }
                }
            },
            computed: {
                // 視角
                view: function () {
                    return {
                        transform: `scale(${this.photoRange / 100}) translate(${this.photo_X}%,${this.photo_Y}%)`
                    }
                },
                // 相框變化
                canvasObject1_Style: function () {
                    return {
                        transform: `scale(${this.photo1_size / 100}) translate(${this.photo1_X}%,${this.photo1_Y}%)`
                    }
                },
                canvasObject2_Style: function () {
                    return {
                        transform: `scale(${this.photo2_size / 100}) translate(${this.photo2_X}%,${this.photo2_Y}%)`
                    }
                }, canvasObject3_Style: function () {
                    return {
                        transform: `scale(${this.photo3_size / 100}) translate(${this.photo3_X}%,${this.photo3_Y}%)`
                    }
                },
                canvasObject4_Style: function () {
                    return {
                        transform: `scale(${this.photo4_size / 100}) translate(${this.photo4_X}%,${this.photo4_Y}%)`
                    }
                }, canvasObject5_Style: function () {
                    return {
                        transform: `scale(${this.photo5_size / 100}) translate(${this.photo5_X}%,${this.photo5_Y}%)`
                    }
                },
                // 相框陰影
                canvasShadowStyle0: function () {
                    return {
                        "width": (this.canvasStyle[0].width.replace("px", "") * 100 / 100) + "px", //相框的95%
                        "height": (this.canvasStyle[0].height.replace("px", "") * 95 / 100) + "px", //相框的95%
                    }
                },
                canvasShadowStyle1: function () {
                    return {
                        "width": (this.canvasStyle[1].width.replace("px", "") * 100 / 100) + "px", //相框的95%
                        "height": (this.canvasStyle[1].height.replace("px", "") * 95 / 100) + "px", //相框的95%
                    }
                },
                canvasShadowStyle2: function () {
                    return {
                        "width": (this.canvasStyle[2].width.replace("px", "") * 100 / 100) + "px", //相框的95%
                        "height": (this.canvasStyle[2].height.replace("px", "") * 95 / 100) + "px", //相框的95%
                    }
                },
                canvasShadowStyle3: function () {
                    return {
                        "width": (this.canvasStyle[3].width.replace("px", "") * 100 / 100) + "px", //相框的95%
                        "height": (this.canvasStyle[3].height.replace("px", "") * 95 / 100) + "px", //相框的95%
                    }
                },
                canvasShadowStyle4: function () {
                    return {
                        "width": (this.canvasStyle[4].width.replace("px", "") * 100 / 100) + "px", //相框的95%
                        "height": (this.canvasStyle[4].height.replace("px", "") * 95 / 100) + "px", //相框的95%
                    }
                },
            },
            methods: {
                changeWallPaper: function (e) {
                    var files = e.target.files || e.dataTransfer.files;
                    if (!files.length)
                        return;
                    else {
                        var image = new Image();
                        var reader = new FileReader();
                        reader.onload = (e2) => {
                            console.log(e2.target.result);
                            this.wall_paperStyle.src = e2.target.result;
                        };
                        reader.readAsDataURL(files[0]);
                    }
                },
                changePhoto: function (target, e) {
                    var files = e.target.files || e.dataTransfer.files;
                    if (!files.length)
                        return;
                    else {
                        var image = new Image();
                        var reader = new FileReader();

                        reader.onload = (e2) => {

                            //* 照片變更
                            this.photo[target].src = e2.target.result;

                            //* 相框大小設置
                            image.src = e2.target.result;

                            let vm = this;
                            image.onload = function () {
                                //如果照片是橫的
                                if (this.width > this.height) {
                                    //相框的 width 為 牆壁的 60%
                                    vm.canvasStyle[target].width = (vm.wallStyle.width.replace("px", "") * 60 / 100) + "px";
                                    vm.canvasStyle[target].height = this.height * (vm.wallStyle.width.replace("px", "") * 60 / 100 / this.width) + "px";
                                }
                                //如果照片是直的
                                else if (this.width <= this.height) {
                                    //相框的 height 為 牆壁的 60%
                                    vm.canvasStyle[target].height = (vm.wallStyle.height.replace("px", "") * 60 / 100) + "px";
                                    vm.canvasStyle[target].width = this.width * (vm.wallStyle.height.replace("px", "") * 60 / 100 / this.height) + "px";
                                }
                            }


                        };
                        reader.readAsDataURL(files[0]);
                    }
                }
            },
            beforeCreate() { },
            created() { },
            beforeMount() { },
            mounted() { }
        });

        vm.mount('#app');


    </script>

</body>

</html>